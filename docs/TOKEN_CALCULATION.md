# üìä –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ç–æ–∫–µ–Ω—ñ–≤ –¥–ª—è –ø–ª–∞–Ω—É —Ç—Ä–µ–Ω—É–≤–∞–Ω—å

## üéØ Gemini 2.5 Flash –ª—ñ–º—ñ—Ç–∏:
- **Input:** 1,048,576 —Ç–æ–∫–µ–Ω—ñ–≤ (1M)
- **Output:** **65,536 —Ç–æ–∫–µ–Ω—ñ–≤** (~49,000 —Å–ª—ñ–≤)

---

## üìù –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –¥–ª—è –ø–ª–∞–Ω—É —Ç—Ä–µ–Ω—É–≤–∞–Ω—å

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–ª–∞–Ω—É:

**1 –¥–µ–Ω—å —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è –º—ñ—Å—Ç–∏—Ç—å:**
- –†–æ–∑–º–∏–Ω–∫–∞: ~100 —Å–ª—ñ–≤ = ~130 —Ç–æ–∫–µ–Ω—ñ–≤
- 6-8 –≤–ø—Ä–∞–≤ √ó ~200 —Å–ª—ñ–≤ –∫–æ–∂–Ω–∞ = ~1,200 —Å–ª—ñ–≤ = ~1,600 —Ç–æ–∫–µ–Ω—ñ–≤
- –ó–∞–º–∏–Ω–∫–∞: ~100 —Å–ª—ñ–≤ = ~130 —Ç–æ–∫–µ–Ω—ñ–≤
- Notes: ~100 —Å–ª—ñ–≤ = ~130 —Ç–æ–∫–µ–Ω—ñ–≤
- **–†–ê–ó–û–ú –Ω–∞ 1 –¥–µ–Ω—å: ~1,500 —Å–ª—ñ–≤ = ~2,000 —Ç–æ–∫–µ–Ω—ñ–≤**

### –î–ª—è —Ä—ñ–∑–Ω–æ—ó —á–∞—Å—Ç–æ—Ç–∏ —Ç—Ä–µ–Ω—É–≤–∞–Ω—å:

| –ß–∞—Å—Ç–æ—Ç–∞ | –î–Ω—ñ–≤ | –°–ª—ñ–≤ | –¢–æ–∫–µ–Ω—ñ–≤ | % –≤—ñ–¥ –ª—ñ–º—ñ—Ç—É |
|---------|------|------|---------|--------------|
| 3 –¥–Ω—ñ/—Ç–∏–∂–¥–µ–Ω—å | 3 | 4,500 | 6,000 | 9% |
| 4 –¥–Ω—ñ/—Ç–∏–∂–¥–µ–Ω—å | 4 | 6,000 | 8,000 | 12% |
| 5 –¥–Ω—ñ–≤/—Ç–∏–∂–¥–µ–Ω—å | 5 | 7,500 | 10,000 | 15% |
| 6 –¥–Ω—ñ–≤/—Ç–∏–∂–¥–µ–Ω—å | 6 | 9,000 | 12,000 | 18% |

### –ó –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º–∏ –ø–æ–ª—è–º–∏ (targetWeight + recommendation):

**1 –≤–ø—Ä–∞–≤–∞ –∑ –Ω–æ–≤–∏–º–∏ –ø–æ–ª—è–º–∏:**
- –ë–∞–∑–æ–≤–∏–π –æ–ø–∏—Å: ~200 —Å–ª—ñ–≤ = ~270 —Ç–æ–∫–µ–Ω—ñ–≤
- targetWeight: 1 —á–∏—Å–ª–æ = ~1 —Ç–æ–∫–µ–Ω
- recommendation.text: ~50 —Å–ª—ñ–≤ = ~65 —Ç–æ–∫–µ–Ω—ñ–≤
- **–†–ê–ó–û–ú –Ω–∞ 1 –≤–ø—Ä–∞–≤—É: ~250 —Å–ª—ñ–≤ = ~336 —Ç–æ–∫–µ–Ω—ñ–≤**

**1 –¥–µ–Ω—å –∑ –Ω–æ–≤–∏–º–∏ –ø–æ–ª—è–º–∏:**
- 6-8 –≤–ø—Ä–∞–≤ √ó 336 —Ç–æ–∫–µ–Ω—ñ–≤ = ~2,400 —Ç–æ–∫–µ–Ω—ñ–≤
- –†–æ–∑–º–∏–Ω–∫–∞ + –∑–∞–º–∏–Ω–∫–∞ + notes = ~400 —Ç–æ–∫–µ–Ω—ñ–≤
- **–†–ê–ó–û–ú –Ω–∞ 1 –¥–µ–Ω—å: ~2,800 —Ç–æ–∫–µ–Ω—ñ–≤**

### –û–Ω–æ–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü—è –∑ recommendation:

| –ß–∞—Å—Ç–æ—Ç–∞ | –î–Ω—ñ–≤ | –¢–æ–∫–µ–Ω—ñ–≤ | % –≤—ñ–¥ –ª—ñ–º—ñ—Ç—É | –ë–µ–∑–ø–µ—á–Ω–æ? |
|---------|------|---------|--------------|-----------|
| 3 –¥–Ω—ñ/—Ç–∏–∂–¥–µ–Ω—å | 3 | 8,400 | 13% | ‚úÖ –¢–∞–∫ |
| 4 –¥–Ω—ñ/—Ç–∏–∂–¥–µ–Ω—å | 4 | 11,200 | 17% | ‚úÖ –¢–∞–∫ |
| 5 –¥–Ω—ñ–≤/—Ç–∏–∂–¥–µ–Ω—å | 5 | 14,000 | 21% | ‚úÖ –¢–∞–∫ |
| 6 –¥–Ω—ñ–≤/—Ç–∏–∂–¥–µ–Ω—å | 6 | 16,800 | 26% | ‚úÖ –¢–∞–∫ |

---

## ‚ö†Ô∏è –ü–û–¢–ï–ù–¶–Ü–ô–ù–Ü –ü–†–û–ë–õ–ï–ú–ò

### 1. –î—É–∂–µ –¥–µ—Ç–∞–ª—å–Ω—ñ –æ–ø–∏—Å–∏

–Ø–∫—â–æ AI –≥–µ–Ω–µ—Ä—É—î **–î–£–ñ–ï –¥–µ—Ç–∞–ª—å–Ω—ñ** –æ–ø–∏—Å–∏:
- 1 –≤–ø—Ä–∞–≤–∞: ~400 —Å–ª—ñ–≤ = ~530 —Ç–æ–∫–µ–Ω—ñ–≤
- 1 –¥–µ–Ω—å: ~4,500 —Ç–æ–∫–µ–Ω—ñ–≤
- 6 –¥–Ω—ñ–≤: **27,000 —Ç–æ–∫–µ–Ω—ñ–≤** (41% –ª—ñ–º—ñ—Ç—É)

**–†–∏–∑–∏–∫:** –°–µ—Ä–µ–¥–Ω—ñ–π - –≤—Å–µ —â–µ –≤ –º–µ–∂–∞—Ö –ª—ñ–º—ñ—Ç—É

### 2. –ü—Ä–æ–±–ª–µ–º–∏ –∑–¥–æ—Ä–æ–≤'—è

–Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î **–±–∞–≥–∞—Ç–æ –ø—Ä–æ–±–ª–µ–º –∑–¥–æ—Ä–æ–≤'—è**:
- –ü—Ä–æ–º–ø—Ç —Å—Ç–∞—î –¥–æ–≤—à–∏–º (+500-1000 —Ç–æ–∫–µ–Ω—ñ–≤ input)
- AI –≥–µ–Ω–µ—Ä—É—î –±—ñ–ª—å—à–µ –ø–æ—è—Å–Ω–µ–Ω—å –ø—Ä–æ –±–µ–∑–ø–µ–∫—É (+200 —Ç–æ–∫–µ–Ω—ñ–≤ –Ω–∞ –≤–ø—Ä–∞–≤—É)
- 1 –¥–µ–Ω—å: ~3,500 —Ç–æ–∫–µ–Ω—ñ–≤
- 6 –¥–Ω—ñ–≤: **21,000 —Ç–æ–∫–µ–Ω—ñ–≤** (32% –ª—ñ–º—ñ—Ç—É)

**–†–∏–∑–∏–∫:** –ù–∏–∑—å–∫–∏–π - –≤ –º–µ–∂–∞—Ö –ª—ñ–º—ñ—Ç—É

### 3. –ö–æ–º–±—ñ–Ω–∞—Ü—ñ—è –≤—Å—å–æ–≥–æ

**–ù–∞–π–≥—ñ—Ä—à–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π:**
- 6 –¥–Ω—ñ–≤ —Ç—Ä–µ–Ω—É–≤–∞–Ω—å
- –î—É–∂–µ –¥–µ—Ç–∞–ª—å–Ω—ñ –æ–ø–∏—Å–∏
- –ë–∞–≥–∞—Ç–æ –ø—Ä–æ–±–ª–µ–º –∑–¥–æ—Ä–æ–≤'—è
- targetWeight + recommendation
- **–†–∞–∑–æ–º: ~30,000 —Ç–æ–∫–µ–Ω—ñ–≤** (46% –ª—ñ–º—ñ—Ç—É)

**–†–∏–∑–∏–∫:** –ù–∏–∑—å–∫–∏–π - –≤—Å–µ —â–µ –≤ –º–µ–∂–∞—Ö –ª—ñ–º—ñ—Ç—É

---

## üõ°Ô∏è –ó–ê–•–ò–°–¢ –í–Ü–î –û–ë–†–Ü–ó–ê–ù–ù–Ø

### –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω:

```typescript
// geminiService.ts:257
const model = ai!.getGenerativeModel({ model: selectedModel });
// ‚ùå –ù–µ–º–∞—î maxOutputTokens!
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –Ø–∫—â–æ –Ω–µ –≤–∫–∞–∑–∞—Ç–∏ `maxOutputTokens`, –º–æ–¥–µ–ª—å –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –¥–µ—Ñ–æ–ª—Ç–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è (—á–∞—Å—Ç–æ 2048-8192 —Ç–æ–∫–µ–Ω—ñ–≤).

### ‚úÖ –†—ñ—à–µ–Ω–Ω—è:

```typescript
const model = ai!.getGenerativeModel({ 
  model: selectedModel,
  generationConfig: {
    maxOutputTokens: 32000, // 50% –≤—ñ–¥ –ª—ñ–º—ñ—Ç—É - –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è –±—É–¥—å-—è–∫–æ–≥–æ –ø–ª–∞–Ω—É
    temperature: 0.7, // –ö—Ä–µ–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å –¥–ª—è —Ä—ñ–∑–Ω–æ–º–∞–Ω—ñ—Ç–Ω–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π
    topK: 40,
    topP: 0.95
  }
});
```

### –ß–æ–º—É 32,000 —Ç–æ–∫–µ–Ω—ñ–≤?

1. **–î–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è –±—É–¥—å-—è–∫–æ–≥–æ –ø–ª–∞–Ω—É:**
   - –ù–∞–π–≥—ñ—Ä—à–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π: ~30,000 —Ç–æ–∫–µ–Ω—ñ–≤
   - –ó–∞–ø–∞—Å: 2,000 —Ç–æ–∫–µ–Ω—ñ–≤

2. **–ù–µ –Ω–∞–¥—Ç–æ –±–∞–≥–∞—Ç–æ:**
   - –ù–µ –≤–∏—Ç—Ä–∞—á–∞—î–º–æ –∑–∞–π–≤—ñ —Ç–æ–∫–µ–Ω–∏
   - –®–≤–∏–¥—à–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è
   - –ú–µ–Ω—à–∞ –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å "–≥–∞–ª—é—Ü–∏–Ω–∞—Ü—ñ–π" AI

3. **–ë–µ–∑–ø–µ—á–Ω–∏–π –∑–∞–ø–∞—Å:**
   - –Ø–∫—â–æ AI –≥–µ–Ω–µ—Ä—É—î –±—ñ–ª—å—à–µ - –Ω–µ –æ–±—Ä—ñ–∂–µ
   - –Ø–∫—â–æ AI –≥–µ–Ω–µ—Ä—É—î –º–µ–Ω—à–µ - –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞

---

## üìä –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

### 1. –î–æ–¥–∞—Ç–∏ maxOutputTokens –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–ª–∞–Ω—É

```typescript
// geminiService.ts - generateWorkoutPlan
const model = ai!.getGenerativeModel({ 
  model: selectedModel,
  generationConfig: {
    maxOutputTokens: 32000, // –î–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è 6 –¥–Ω—ñ–≤ –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º–∏ –æ–ø–∏—Å–∞–º–∏
    temperature: 0.7,
    topK: 40,
    topP: 0.95
  }
});
```

### 2. –î–æ–¥–∞—Ç–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

```typescript
console.log('‚úÖ Received response:', {
  responseLength: jsonStr.length,
  estimatedTokens: Math.ceil(jsonStr.length / 4), // –ü—Ä–∏–±–ª–∏–∑–Ω–æ 1 —Ç–æ–∫–µ–Ω = 4 —Å–∏–º–≤–æ–ª–∏
  percentOfLimit: Math.ceil((jsonStr.length / 4) / 32000 * 100) + '%'
});
```

### 3. –î–æ–¥–∞—Ç–∏ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è —è–∫—â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –æ–±—Ä—ñ–∑–∞–Ω–∞

```typescript
if (result.candidates?.[0]?.finishReason === 'MAX_TOKENS') {
  console.warn('‚ö†Ô∏è –í—ñ–¥–ø–æ–≤—ñ–¥—å AI –±—É–ª–∞ –æ–±—Ä—ñ–∑–∞–Ω–∞ —á–µ—Ä–µ–∑ –ª—ñ–º—ñ—Ç —Ç–æ–∫–µ–Ω—ñ–≤!');
  // –ú–æ–∂–Ω–∞ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ —Ä–µ–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∑ –º–µ–Ω—à–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –¥–Ω—ñ–≤
}
```

### 4. –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä–æ–º–ø—Ç

**–ó–∞–º—ñ—Å—Ç—å:**
```
"–ù–∞–¥–∞–π –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–µ—Ç–∞–ª—å–Ω–∏–π, –∞–ª–µ –±–µ–∑ –∑–∞–π–≤–æ—ó –≤–æ–¥–∏ (–ø—Ä–∏–±–ª–∏–∑–Ω–æ 5-7 —Ä–µ—á–µ–Ω—å) –ø–æ–∫—Ä–æ–∫–æ–≤–∏–π –æ–ø–∏—Å..."
```

**–ö—Ä–∞—â–µ:**
```
"–ù–∞–¥–∞–π –¥–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å —Ç–µ—Ö–Ω—ñ–∫–∏ (4-6 —Ä–µ—á–µ–Ω—å): –ø–æ—á–∞—Ç–∫–æ–≤–∞ –ø–æ–∑–∏—Ü—ñ—è, —Ä—É—Ö, –¥–∏—Ö–∞–Ω–Ω—è, —Ç–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏."
```

**–ï–∫–æ–Ω–æ–º—ñ—è:** ~20% —Ç–æ–∫–µ–Ω—ñ–≤ –±–µ–∑ –≤—Ç—Ä–∞—Ç–∏ —è–∫–æ—Å—Ç—ñ

---

## üéØ –í–∏—Å–Ω–æ–≤–æ–∫

### –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω:
- ‚ùå –ù–µ–º–∞—î `maxOutputTokens` - —Ä–∏–∑–∏–∫ –æ–±—Ä—ñ–∑–∞–Ω–Ω—è
- ‚ö†Ô∏è –î–µ—Ñ–æ–ª—Ç–Ω–∏–π –ª—ñ–º—ñ—Ç –º–æ–∂–µ –±—É—Ç–∏ 2048-8192 —Ç–æ–∫–µ–Ω—ñ–≤
- ‚ö†Ô∏è –ü–ª–∞–Ω –Ω–∞ 6 –¥–Ω—ñ–≤ –º–æ–∂–µ –Ω–µ –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏—Å—è –ø–æ–≤–Ω—ñ—Å—Ç—é

### –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
- ‚úÖ `maxOutputTokens: 32000` - –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è –±—É–¥—å-—è–∫–æ–≥–æ –ø–ª–∞–Ω—É
- ‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- ‚úÖ –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –æ–±—Ä—ñ–∑–∞–Ω–Ω—è
- ‚úÖ –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –ø—Ä–æ–º–ø—Ç

### –†–∏–∑–∏–∫–∏:
- üü¢ **–ù–∏–∑—å–∫–∏–π —Ä–∏–∑–∏–∫** –æ–±—Ä—ñ–∑–∞–Ω–Ω—è –ø—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
- üü¢ –ü–ª–∞–Ω –Ω–∞ 6 –¥–Ω—ñ–≤ –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º–∏ –æ–ø–∏—Å–∞–º–∏: ~30,000 —Ç–æ–∫–µ–Ω—ñ–≤ (94% –≤—ñ–¥ –ª—ñ–º—ñ—Ç—É)
- üü¢ –ó–∞–ø–∞—Å 2,000 —Ç–æ–∫–µ–Ω—ñ–≤ –¥–ª—è –Ω–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤
